This project provisions an AWS environment with Terraform, configures it with Ansible, and automates everything through a Jenkins CI/CD pipeline.
![ansible1](https://github.com/user-attachments/assets/5b62e2c8-06ab-451f-b496-140ccbd77776)
![ansible3](https://github.com/user-attachments/assets/e504e97f-3b6c-4a89-8461-9130ebdb386c)
![ansible2](https://github.com/user-attachments/assets/a8b524df-e34e-46ce-8137-d738e6cbfc90)

Project Overview
This repository contains a full DevOps stack:

Terraform for AWS infrastructure provisioning (VPC, subnets, security groups, EC2)

Ansible for server configuration (packages, Nginx, Docker, web content)

Jenkins pipeline (Jenkinsfile) for automated CI/CD on each Git push

Architecture
Cloud provider: AWS

Provisioning: Terraform

Configuration management: Ansible

CI/CD: Jenkins (Pipeline as Code)

High-level flow:

Developer pushes code to GitHub.

GitHub webhook triggers Jenkins.

Jenkins runs Terraform (init → plan → manual approval → apply).

Terraform creates AWS infrastructure and generates Ansible inventory.

Jenkins runs Ansible to configure EC2 instances and deploy the web page.

Repository Structure
text
project/
├── terraform/
│   ├── main.tf
│   ├── variables.tf
│   ├── outputs.tf
│   ├── inventory.tf
│   ├── inventory.tftpl
│   └── terraform.tfvars
├── ansible/
│   ├── ansible.cfg
│   ├── inventory.ini        # Generated by Terraform
│   ├── playbooks/
│   │   └── site.yml
│   └── roles/
│       ├── common/
│       │   └── tasks/main.yml
│       ├── nginx/
│       │   ├── tasks/main.yml
│       │   └── handlers/main.yml
│       └── docker/
│           └── tasks/main.yml
└── Jenkinsfile
Terraform Details
Terraform responsibilities:

Create VPC, Internet Gateway, route table, and public subnet

Create security groups for web and Jenkins

Create EC2 instances (web servers and optional Jenkins server)

Create SSH key pair reference

Generate Ansible inventory (ansible/inventory.ini) via local_file + inventory.tftpl

Key commands (local or in Jenkins):

bash
cd terraform
terraform init
terraform validate
terraform plan
terraform apply
terraform destroy
Variables are defined in variables.tf and values provided in terraform.tfvars (region, instance type/count, key name, paths to SSH keys, etc.).

Ansible Details
Ansible responsibilities:

Install common packages (curl, git, vim, etc.)

Install and configure Nginx

Install and start Docker

Deploy a static HTML page to /var/www/html/index.html

Main entrypoint:

bash
cd ansible
ansible web -m ping -i inventory.ini
ansible-playbook -i inventory.ini playbooks/site.yml
The inventory is generated automatically by Terraform and contains the web server public IPs and SSH key path.

Jenkins CI/CD Pipeline
The Jenkinsfile defines a multi-stage pipeline:

Checkout: Pull latest code from Git

Terraform Init: terraform init and terraform validate

Terraform Plan: terraform plan -out=tfplan

Approval: Manual input step before applying changes

Terraform Apply: terraform apply -auto-approve tfplan

Wait for EC2: Short sleep to allow instances to fully boot

Debug Inventory: Optional diagnostics (outputs & inventory)

Configure with Ansible: Run ansible-playbook against generated inventory

Typical setup steps on the Jenkins server:

Install Java, Jenkins, Terraform, Ansible

Create SSH key for Jenkins user (/var/lib/jenkins/.ssh/id_rsa)

Configure AWS credentials in Jenkins

Configure pipeline job pointing to this repo (SCM: Git, Script Path: Jenkinsfile)

GitHub Webhook (Optional)
To enable fully automatic CI/CD on each push:

Configure the pipeline with “GitHub hook trigger for GITScm polling”

Add a webhook in the GitHub repository:

Payload URL: http://<JENKINS_IP>:8080/github-webhook/

Event: “Just the push event”

How to Run Locally (Without Jenkins)
Ensure Terraform, Ansible, and AWS credentials are configured locally.

Generate SSH key and update terraform.tfvars paths.

Run:

bash
cd terraform
terraform init
terraform apply

cd ../ansible
ansible-playbook -i inventory.ini playbooks/site.yml
Open the web server IPs in a browser (from terraform output web_server_ips).

Notes and Next Steps
This project is a learning-oriented example for Terraform + Ansible + Jenkins on AWS.

Consider adding:

Remote Terraform backend (S3 + DynamoDB)

Parameterization for environments (dev/stage/prod)

Health checks and monitoring

HTTPS and domain integration (ALB + ACM)

You can customize the playbooks, roles, and Jenkins stages to add more services or application deployments as needed.
